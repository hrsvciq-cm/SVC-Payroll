# ููุฎุต ุงูุชุญููู - ูุธุงู HR & Payroll

## โ ูุง ุชู ุฅูุฌุงุฒู

### ุงูุจููุฉ ุงูุฃุณุงุณูุฉ โ
- [x] Next.js 14 ูุน App Router
- [x] Prisma ORM ูุน Schema ูุทุงุจู ุชูุงูุงู ููุจููุฉ ุงููุญููุฉ
- [x] Supabase Integration (Auth + PostgreSQL)
- [x] Middleware ูุญูุงูุฉ ุฌููุน Routes
- [x] ุตูุญุฉ Login ุงุญุชุฑุงููุฉ

### ูุธุงู ุงููุตุงุฏูุฉ โ
- [x] ูุธุงู ูุบูู ุจุงููุงูู (ูุง ูุตูู ุจุฏูู ุชุณุฌูู ุฏุฎูู)
- [x] Supabase Auth ููุฌูุณุงุช
- [x] RBAC ูุน 4 ุฃุฏูุงุฑ:
  - `admin`: ุตูุงุญูุงุช ูุงููุฉ
  - `hr`: ุฅุฏุงุฑุฉ ุงูููุธููู ูุงูุฑูุงุชุจ
  - `finance`: ุนุฑุถ ุงูุชูุงุฑูุฑ ููุท
  - `viewer`: ูุฑุงุกุฉ ููุท

### API Routes โ
- [x] `/api/employees` - CRUD ููููุธููู
- [x] `/api/employees/[id]` - ุชูุงุตูู/ุชุนุฏูู/ุญุฐู ููุธู
- [x] `/api/attendance` - ุชุณุฌูู ูุฌูุจ ุงูุญุถูุฑ
- [x] `/api/payroll/calculate` - ุญุณุงุจ ุงูุฑูุงุชุจ
- [x] `/api/payroll` - ุฌูุจ ุจูุงูุงุช ุงูุฑูุงุชุจ
- [x] `/api/deductions` - ุฅุฏุงุฑุฉ ุงูุฎุตููุงุช ูุงูููุงูุขุช ูุงูุณูู
- [x] `/api/deductions/[id]` - ุชุนุฏูู/ุญุฐู ุฎุตู

### ููุทู ุงูุฃุนูุงู ุงููุญููุธ 100% โ
- [x] **ุญุณุงุจ ุงูุฑูุงุชุจ**: ูุทุงุจู ุชูุงูุงู
  - ุงุณุชุฎุฏุงู 30 ููู ุซุงุจุช (STANDARD_MONTH_DAYS)
  - ุญุณุงุจ ุงูุนูู ุงูุฅุถุงูู (overtime)
  - ุญุณุงุจ ุงูุชุฃุฎูุฑุงุช (time delay, non-time delay)
  - ูุนุงูุฌุฉ ุงูููุธููู ุงูููุชููุฉ ุฎุฏูุงุชูู
  - ูุนุงูุฌุฉ ุงูููุธููู ุงูููููููู (ุจุฑุงุชุจ/ุจุฏูู ุฑุงุชุจ)
  - ุญุณุงุจ ุงูุฑุงุชุจ ุงููุณุจู ููููุธููู ุงูุฐูู ุจุฏุฃูุง ูู ููุชุตู ุงูุดูุฑ
  
- [x] **ููุงุนุฏ ุฑุคูุฉ ุงูููุธููู**: ูุญููุธุฉ
  - ููุชูู ุงูุฎุฏูุฉ ูุง ูุธูุฑ ูู ุงูููุงุฆู ุงูุงูุชุฑุงุถูุฉ
  - ููุชูู ุงูุฎุฏูุฉ ูุธูุฑ ููุท ูู ุฃุฑุดูู ูููุตู
  - ููููู ุนู ุงูุนูู ูุจูู ุธุงูุฑุงู ููู ูุง ููุญุณุจ ูู ุฏูุงู ุฌุฏูุฏ
  
- [x] **ุงูุชุญูู ูู ุงูุชูุงุฑูุฎ**: ูุญููุธ
  - ููุน ุชุณุฌูู ุฏูุงู ูุจู ุชุงุฑูุฎ ุงูุชุนููู
  - ููุน ุชุณุฌูู ุฏูุงู ุจุนุฏ ุชุงุฑูุฎ ุงูุฅููุงุก
  - ููุน ุชุณุฌูู ุฏูุงู ุจุนุฏ ุชุงุฑูุฎ ุงูุฅููุงู
  - ููุน ุงูุชุณุฌูู ุงูููุฑุฑ ูููุณ ุงูููุธู ูู ููุณ ุงูููู

### ูุงุนุฏุฉ ุงูุจูุงูุงุช โ
- [x] Prisma Schema ูุทุงุจู ุชูุงูุงู:
  - `Employee` - ุงูููุธููู (ุฌููุน ุงูุญููู ูุญููุธุฉ)
  - `Attendance` - ุงูุญุถูุฑ ูุงูุงูุตุฑุงู
  - `Payroll` - ุงูุฑูุงุชุจ (ุฌููุน ุงูุญููู ูุญููุธุฉ)
  - `Deduction` - ุงูุฎุตููุงุช ูุงูููุงูุขุช ูุงูุณูู
  - `QuickCode` - ุงูุฑููุฒ ุงูุณุฑูุนุฉ
  - `User` - ุงููุณุชุฎุฏููู (ููู RBAC)

## ๐ ุงููููุงุช ุงูุฑุฆูุณูุฉ

### ุงูุจููุฉ ุงูุฃุณุงุณูุฉ
- `package.json` - ุงูุญุฒู ูุงูู scripts
- `next.config.js` - ุฅุนุฏุงุฏุงุช Next.js
- `middleware.js` - ุญูุงูุฉ Routes
- `.env.local.example` - ูุซุงู ูุชุบูุฑุงุช ุงูุจูุฆุฉ

### ูุงุนุฏุฉ ุงูุจูุงูุงุช
- `prisma/schema.prisma` - Schema ูุงุนุฏุฉ ุงูุจูุงูุงุช
- `lib/prisma.js` - Prisma Client

### ุงููุตุงุฏูุฉ ูุงูุฃูุงู
- `lib/auth.js` - ูุธุงุฆู ุงููุตุงุฏูุฉ ูุงูุตูุงุญูุงุช
- `lib/supabase/client.js` - Supabase Client (Browser)
- `lib/supabase/server.js` - Supabase Client (Server)

### ููุทู ุงูุฃุนูุงู
- `lib/payroll-calculator.js` - **ููุทู ุญุณุงุจ ุงูุฑูุงุชุจ (ูุทุงุจู 100%)**

### API Routes
- `app/api/employees/route.js` - ุฅุฏุงุฑุฉ ุงูููุธููู
- `app/api/employees/[id]/route.js` - ุชูุงุตูู/ุชุนุฏูู/ุญุฐู ููุธู
- `app/api/attendance/route.js` - ุชุณุฌูู ูุฌูุจ ุงูุญุถูุฑ
- `app/api/payroll/calculate/route.js` - ุญุณุงุจ ุงูุฑูุงุชุจ
- `app/api/payroll/route.js` - ุฌูุจ ุจูุงูุงุช ุงูุฑูุงุชุจ
- `app/api/deductions/route.js` - ุฅุฏุงุฑุฉ ุงูุฎุตููุงุช
- `app/api/deductions/[id]/route.js` - ุชุนุฏูู/ุญุฐู ุฎุตู
- `app/api/auth/logout/route.js` - ุชุณุฌูู ุงูุฎุฑูุฌ

### ุงูุตูุญุงุช
- `app/page.js` - ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ (redirect to dashboard)
- `app/layout.js` - Layout ุงูุฑุฆูุณู
- `app/login/page.js` - ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
- `app/dashboard/page.js` - ููุญุฉ ุงูุชุญูู (ุฃุณุงุณูุฉ)

## ๐ ุฎุทูุงุช ุงูุฅุนุฏุงุฏ

### 1. ุชุซุจูุช ุงูุญุฒู
```bash
npm install
```

### 2. ุฅุนุฏุงุฏ Supabase
1. ุฃูุดุฆ ูุดุฑูุน ุฌุฏูุฏ ุนูู [Supabase](https://supabase.com)
2. ุงุญุตู ุนูู:
   - Project URL
   - Anon Key
   - Service Role Key
   - Database URL

### 3. ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ
ุฃูุดุฆ `.env.local`:
```env
NEXT_PUBLIC_SUPABASE_URL=your_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key
DATABASE_URL=your_database_url
```

### 4. ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช
```bash
# ุชูููุฏ Prisma Client
npm run prisma:generate

# ุชุดุบูู Migrations
npm run prisma:migrate
```

### 5. ุฅูุดุงุก ุญุณุงุจ Admin
1. ูู Supabase Dashboard > Authentication: ุฃูุดุฆ ูุณุชุฎุฏู
2. ูู Prisma Studio (`npm run prisma:studio`): ุฃุถู ุณุฌู ูู ุฌุฏูู `users`:
   ```sql
   INSERT INTO users (id, email, role, name)
   VALUES ('uuid-from-supabase', 'admin@example.com', 'admin', 'Admin');
   ```

### 6. ุชุดุบูู ุงููุธุงู
```bash
npm run dev
```

## ๐ ููุงุญุธุงุช ูููุฉ

### โ ูุง ุชู ุงูุญูุงุธ ุนููู
1. **ุฌููุน ููุทู ุญุณุงุจ ุงูุฑูุงุชุจ**: ูุทุงุจู 100% ูููุธุงู ุงููุญูู
2. **ููุงุนุฏ ุฑุคูุฉ ุงูููุธููู**: ูุญููุธุฉ ููุง ูู
3. **ุงูุชุญูู ูู ุงูุชูุงุฑูุฎ**: ุฌููุน ุงููููุฏ ูุญููุธุฉ
4. **ุฃุณูุงุก ุงูุญููู**: ุฌููุน ุฃุณูุงุก ุงูุญููู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุญููุธุฉ
5. **ุฃููุงุน ุงูุจูุงูุงุช**: ุฌููุน ุฃููุงุน ุงูุจูุงูุงุช ูุญููุธุฉ

### โ๏ธ ูุง ูุญุชุงุฌ ุฅููุงู
1. **ุงููุงุฌูุงุช (UI)**: 
   - ุตูุญุฉ Dashboard ูุงููุฉ
   - ุตูุญุฉ Employees (ูุงุฆูุฉ + ุฅุถุงูุฉ/ุชุนุฏูู)
   - ุตูุญุฉ Attendance (ุชุณุฌูู ูุฑุฏู/ุฌูุงุนู)
   - ุตูุญุฉ Payroll (ุนุฑุถ + ุญุณุงุจ)
   - ุตูุญุฉ Reports
   - ุงุณุชุฎุฏุงู shadcn/ui (ูุชุทูุจ Tailwind)

2. **ุงูููุฒุงุช ุงูุฅุถุงููุฉ**:
   - ูุธุงู ุงููุณุฎ ุงูุงุญุชูุงุทู ูุงูุงุณุชุนุงุฏุฉ
   - ุงูุฑููุฒ ุงูุณุฑูุนุฉ (Quick Codes)
   - ูุณููุฉ ุงูุฑุงุชุจ (Salary Slip)
   - ุชุตุฏูุฑ Excel

## ๐ ุงูุฃูุงู

- โ ุฌููุน Routes ูุญููุฉ ุจู Middleware
- โ Session management ุขูู ุนุจุฑ Supabase
- โ Server-side validation ูุฌููุน ุงูุนูููุงุช
- โ RBAC ูููุน ุงููุตูู ุบูุฑ ุงููุตุฑุญ ุจู
- โ ููุน ูุดู ููุงุชูุญ Supabase (Server-side only)

## ๐ ููู ุงูุจูุงูุงุช

1. ูู ุงููุธุงู ุงููุญูู: ุงุถุบุท "ูุณุฎ ุงุญุชูุงุทู" ูุงุญูุธ ููู JSON
2. ุงุณุชุฎุฏู Prisma Studio ุฃู ุฃูุดุฆ script ูุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช
3. ุชุฃูุฏ ูู ุงูุญูุงุธ ุนูู:
   - ุฃุฑูุงู ุงูููุธููู (employeeNumber)
   - ุงูุชูุงุฑูุฎ (hireDate, suspensionDate, terminationDate)
   - ุงูุญุณุงุจุงุช (salary, deductions, etc.)

## ๐ฏ ุงููุงุนุฏุฉ ุงูุฐูุจูุฉ

โ **ุชู ุงูุญูุงุธ ุนูู ูู ุงูููุทู**: ูุง ุชุบููุฑ ูู ุทุฑููุฉ ุนูู ุงููุธุงู - ููุท ููู ุฅูู Online ุจุฃุนูู ุฌูุฏุฉ ูุฃูุงู.

