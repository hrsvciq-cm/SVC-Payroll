# ๐ ุณูุฑ ุนูู ุงููุธุงู ุงููุงูู

## ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงููุธุงู ูุนูู ุนูู ุงููุญู ุงูุชุงูู:

1. **ุฅุฏุงุฑุฉ ุงูููุธููู** โ ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ุงูููุธููู
2. **ุชุณุฌูู ุงูุฏูุงู** โ ุชุณุฌูู ุญุถูุฑ/ุบูุงุจ/ุฅุฌุงุฒุฉ ููููุธููู
3. **ุญุณุงุจ ุงูุฑูุงุชุจ** โ ุญุณุงุจ ุงูุฑูุงุชุจ ุจูุงุกู ุนูู ุงูุฏูุงู
4. **ููุญุฉ ุงูุชุญูู** โ ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช

---

## 1. ุฅุฏุงุฑุฉ ุงูููุธููู

### ุงููููุงุช:
- `app/employees/page.js` - ูุงุฌูุฉ ุฅุฏุงุฑุฉ ุงูููุธููู
- `app/api/employees/route.js` - API ููุนูููุงุช CRUD

### ุงููุธุงุฆู:
- โ ุนุฑุถ ูุงุฆูุฉ ุงูููุธููู
- โ ุฅุถุงูุฉ ููุธู ุฌุฏูุฏ
- โ ุชุนุฏูู ุจูุงูุงุช ููุธู
- โ ุญุฐู ููุธู
- โ ุชุตููุฉ ุญุณุจ ุงูุญุงูุฉ (ูุดุท/ููููู/ููุชูู)

### ุงูุตูุงุญูุงุช ุงููุทููุจุฉ:
- `admin` ุฃู `hr` ููุชุนุฏูู/ุงูุญุฐู
- `viewer` ููุนุฑุถ ููุท

---

## 2. ุชุณุฌูู ุงูุฏูุงู

### ุงููููุงุช:
- `app/attendance/page.js` - ูุงุฌูุฉ ุชุณุฌูู ุงูุฏูุงู
- `app/api/attendance/route.js` - API ูุชุณุฌูู ุงูุฏูุงู
- `app/api/attendance/[id]/route.js` - API ูุชุญุฏูุซ/ุญุฐู ุงูุฏูุงู

### ุงูุญุงูุงุช ุงููุฏุนููุฉ:
- **ุญุงุถุฑ** (`present`) - ุงูุญุถูุฑ ุงูุนุงุฏู
- **ุบูุงุจ ุจุชุจููุบ** (`absent` + `absentType: 'with_notice'`) - ูุฎุตู ููู ูุงุญุฏ
- **ุบูุงุจ ุจุฏูู ุชุจููุบ** (`absent` + `absentType: 'without_notice'`) - ูุฎุตู ููููู
- **ุฅุฌุงุฒุฉ** (`leave`) - ุฅุฌุงุฒุฉ ุฑุณููุฉ
- **ุนุทูุฉ** (`holiday`) - ุนุทูุฉ ุฑุณููุฉ

### ุงูุญููู ุงูุฅุถุงููุฉ:
- **ุณุงุนุงุช ุฅุถุงููุฉ** (`overtimeHours`) - ุชุถุงู ุฅูู ุงูุฑุงุชุจ
- **ุชุฃุฎูุฑ ุฒููู** (`timeDelayMinutes`) - ูุฎุตู ุฏูููุฉ ุจุฏูููุฉ
- **ุชุฃุฎูุฑ ุบูุฑ ุฒููู** (`nonTimeDelayMinutes`) - ูุถุฑุจ ูู 2 (ุฏูููุฉ = ุฏูููุชูู ุฎุตู)

### ููููุฉ ุงูุงุณุชุฎุฏุงู:
1. ุงุฎุชุฑ ุงูุชุงุฑูุฎ
2. ุงุฎุชุฑ ุงูููุธู(ูู)
3. ุงุฎุชุฑ ุงูุญุงูุฉ
4. (ุงุฎุชูุงุฑู) ุฃุฏุฎู ุณุงุนุงุช ุฅุถุงููุฉ ุฃู ุชุฃุฎูุฑ
5. ุงุญูุธ

---

## 3. ุญุณุงุจ ุงูุฑูุงุชุจ

### ุงููููุงุช:
- `app/payroll/page.js` - ูุงุฌูุฉ ุงูุฑูุงุชุจ
- `app/api/payroll/route.js` - API ูุฌูุจ ุงูุฑูุงุชุจ
- `app/api/payroll/calculate/route.js` - API ูุญุณุงุจ ุงูุฑูุงุชุจ
- `lib/payroll-calculator.js` - ููุทู ุญุณุงุจ ุงูุฑูุงุชุจ

### ุงูููุทู:

#### 1. ุญุณุงุจ ุฃูุงู ุงูุญุถูุฑ ูุงูุบูุงุจ:
```javascript
presentDays = ุนุฏุฏ ุฃูุงู ุงูุญุถูุฑ
absentDaysWithNotice = ุนุฏุฏ ุฃูุงู ุงูุบูุงุจ ุจุชุจููุบ (ูุฎุตู ููู ูุงุญุฏ ููู ููู)
absentDaysWithoutNotice = ุนุฏุฏ ุฃูุงู ุงูุบูุงุจ ุจุฏูู ุชุจููุบ (ูุฎุตู ููููู ููู ููู)
```

#### 2. ุญุณุงุจ ุงูุฑุงุชุจ ุงูุฃุณุงุณู:
```javascript
dailySalary = salary / 30
baseSalary = salary - (absentDaysWithNotice * dailySalary) - (absentDaysWithoutNotice * 2 * dailySalary)
```

#### 3. ุญุณุงุจ ุงูุณุงุนุงุช ุงูุฅุถุงููุฉ:
```javascript
hourlySalary = salary / (30 * workHours)
overtimePay = totalOvertimeHours * hourlySalary
```

#### 4. ุญุณุงุจ ุงูุชุฃุฎูุฑ:
```javascript
minuteSalary = hourlySalary / 60
timeDelayDeduction = totalTimeDelayMinutes * minuteSalary
nonTimeDelayDeduction = (totalNonTimeDelayMinutes * 2) * minuteSalary
```

#### 5. ุงูุฑุงุชุจ ุงูููุงุฆู:
```javascript
baseSalary = baseSalary + overtimePay - timeDelayDeduction - nonTimeDelayDeduction
netSalary = baseSalary + bonuses - deductions - advances
```

### ููููุฉ ุงูุงุณุชุฎุฏุงู:
1. ุงุฐูุจ ุฅูู ุตูุญุฉ ุงูุฑูุงุชุจ
2. ุงุฎุชุฑ ุงูุดูุฑ (YYYY-MM)
3. ุงุถุบุท "ุญุณุงุจ ุงูุฑูุงุชุจ"
4. ุงูุชุธุฑ ุญุชู ููุชูู ุงูุญุณุงุจ
5. ุณุชุธูุฑ ุงููุชุงุฆุฌ ูู ุงูุฌุฏูู

### ููุงุญุธุงุช ูููุฉ:
- โ๏ธ **ูุฌุจ ุชุณุฌูู ุงูุฏูุงู ุฃููุงู** ูุจู ุญุณุงุจ ุงูุฑูุงุชุจ
- โ๏ธ **ูุฌุจ ุญุณุงุจ ุงูุฑูุงุชุจ ูุฏููุงู** ููู ุดูุฑ (ูุง ูุชู ุชููุงุฆูุงู)
- โ๏ธ **ุฃู ุชุบููุฑ ูู ุงูุฏูุงู** ูุชุทูุจ ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุฑูุงุชุจ

---

## 4. ููุญุฉ ุงูุชุญูู

### ุงููููุงุช:
- `app/dashboard/page.js` - ูุงุฌูุฉ ููุญุฉ ุงูุชุญูู
- `app/api/dashboard/stats/route.js` - API ููุฅุญุตุงุฆูุงุช

### ุงูุฅุญุตุงุฆูุงุช ุงููุนุฑูุถุฉ:
- **ุฅุฌูุงูู ุงูููุธููู** - ุฌููุน ุงูููุธููู (ุนุฏุง ุงูููุชููู)
- **ููุธููู ูุดุทูู** - ุงูููุธููู ุจุญุงูุฉ `active`
- **ููุธููู ููููููู** - ุงูููุธููู ุจุญุงูุฉ `suspended`
- **ุฏูุงู ุงูููู** - ุนุฏุฏ ุณุฌูุงุช ุงูุฏูุงู ููููู ุงูุญุงูู

### ุงูุชุญุฏูุซ:
- ูุชู ุชุญุฏูุซ ุงูุฅุญุตุงุฆูุงุช ุชููุงุฆูุงู ุนูุฏ ุชุญููู ุงูุตูุญุฉ
- ูุชู ุฌูุจ ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุจุงุดุฑุฉ

---

## ๐ง ุฅุตูุงุญ ุงููุดุงูู ุงูุดุงุฆุนุฉ

### ุงููุดููุฉ 1: ุฎุทุฃ `Unknown argument 'absentType'`

**ุงูุณุจุจ**: Prisma Client ูู ูุชู ุชุญุฏูุซู ุจุนุฏ ุฅุถุงูุฉ ุงูุญูู.

**ุงูุญู**:
```bash
# 1. ุฅููุงู ุงูุฎุงุฏู (Ctrl+C)
# 2. ุฅููุงู ุฌููุน ุนูููุงุช Node.js
Get-Process | Where-Object {$_.ProcessName -eq "node"} | Stop-Process -Force

# 3. ุชูููุฏ Prisma Client
npx prisma generate

# 4. ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู
npm run dev
```

### ุงููุดููุฉ 2: ุฎุทุฃ `Forbidden` ุนูุฏ ุญุณุงุจ ุงูุฑูุงุชุจ

**ุงูุณุจุจ**: ุงููุณุชุฎุฏู ููุณ ูุฏูู ุตูุงุญูุฉ `admin` ุฃู `hr`.

**ุงูุญู**:
```bash
# ุงุณุชุฎุฏุงู Prisma Studio
npx prisma studio
# ุซู ุชุญุฏูุซ role ูู ุฌุฏูู users ูู 'viewer' ุฅูู 'admin'

# ุฃู ุงุณุชุฎุฏุงู ุงูุณูุฑูุจุช
node update-user-role.js your-email@example.com admin
```

### ุงููุดููุฉ 3: ูุง ุชุธูุฑ ุจูุงูุงุช ุงูุฑูุงุชุจ

**ุงูุณุจุจ**: ูู ูุชู ุญุณุงุจ ุงูุฑูุงุชุจ ุจุนุฏ.

**ุงูุญู**:
1. ุชุฃูุฏ ูู ุชุณุฌูู ุงูุฏูุงู ููููุธููู
2. ุงุฐูุจ ุฅูู ุตูุญุฉ ุงูุฑูุงุชุจ
3. ุงุฎุชุฑ ุงูุดูุฑ
4. ุงุถุบุท "ุญุณุงุจ ุงูุฑูุงุชุจ"
5. ุงูุชุธุฑ ุญุชู ููุชูู ุงูุญุณุงุจ

### ุงููุดููุฉ 4: ุงูุฅุญุตุงุฆูุงุช ูุง ุชุชุญุฏุซ ูู ููุญุฉ ุงูุชุญูู

**ุงูุณุจุจ**: ูุฏ ุชููู ููุงู ูุดููุฉ ูู API.

**ุงูุญู**:
1. ุงูุชุญ Developer Tools (F12)
2. ุงุฐูุจ ุฅูู Console
3. ุชุญูู ูู ูุฌูุฏ ุฃุฎุทุงุก
4. ุงุฐูุจ ุฅูู Network tab
5. ุชุญูู ูู ุงุณุชุฌุงุจุฉ `/api/dashboard/stats`

---

## โ ูุงุฆูุฉ ุงูุชุญูู

### ูุจู ุงุณุชุฎุฏุงู ุงููุธุงู:
- [ ] ุชู ุชุญุฏูุซ Prisma Client (`npx prisma generate`)
- [ ] ุงููุณุชุฎุฏู ูุฏูู ุตูุงุญูุฉ `admin` ุฃู `hr`
- [ ] ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุชุตูุฉ ูุชุนูู

### ุนูุฏ ุชุณุฌูู ุงูุฏูุงู:
- [ ] ูููู ุฅุถุงูุฉ ุณุฌู ุฏูุงู ุฌุฏูุฏ
- [ ] ูููู ุชุนุฏูู ุญุงูุฉ ุงูุฏูุงู
- [ ] ูููู ุชุนุฏูู ุณุงุนุงุช ุฅุถุงููุฉ ูุชุฃุฎูุฑ
- [ ] ูุชู ุญูุธ ุงูุชุบููุฑุงุช ุจูุฌุงุญ

### ุนูุฏ ุญุณุงุจ ุงูุฑูุงุชุจ:
- [ ] ูููู ุงูุถุบุท ุนูู "ุญุณุงุจ ุงูุฑูุงุชุจ" ุจุฏูู ุฎุทุฃ
- [ ] ุชุธูุฑ ุฑุณุงูุฉ ูุฌุงุญ
- [ ] ุชุธูุฑ ุงููุชุงุฆุฌ ูู ุงูุฌุฏูู
- [ ] ุงูุฃุฑูุงู ููุทููุฉ ูุตุญูุญุฉ

### ูู ููุญุฉ ุงูุชุญูู:
- [ ] ุชุธูุฑ ุฌููุน ุงูุฅุญุตุงุฆูุงุช
- [ ] ุงูุฃุฑูุงู ุตุญูุญุฉ ููุญุฏุซุฉ
- [ ] ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู Console

---

## ๐ ููุงุญุธุงุช ููุงุฆูุฉ

1. **ุชุณุฌูู ุงูุฏูุงู** ูุฌุจ ุฃู ูุชู ููููุงู ุฃู ุญุณุจ ุงูุญุงุฌุฉ
2. **ุญุณุงุจ ุงูุฑูุงุชุจ** ูุฌุจ ุฃู ูุชู ูู ููุงูุฉ ูู ุดูุฑ
3. **ุฃู ุชุบููุฑ ูู ุงูุฏูุงู** ูุชุทูุจ ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุฑูุงุชุจ
4. **ุงูุตูุงุญูุงุช** ูููุฉ - ุชุฃูุฏ ูู ุฃู ุงููุณุชุฎุฏู ูุฏูู ุงูุตูุงุญูุงุช ุงูููุงุณุจุฉ

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ูุดุงูู:
1. ุฑุงุฌุน ููู `COMPREHENSIVE-FIX.md`
2. ุฑุงุฌุน ููู `URGENT-FIX-PRISMA.md`
3. ุชุญูู ูู Terminal ููุฃุฎุทุงุก
4. ุชุญูู ูู Developer Tools (F12) ูู ุงููุชุตูุญ

